# 📘 User Management API (Spring Boot + JPA + PostgreSQL)

A robust and scalable RESTful API for managing users using **Spring Boot 3**, **Spring Data JPA**, and **PostgreSQL**. This backend project supports full CRUD operations, validations, pagination, and testing with an in-memory H2 database.

---

## ✨ Features

| Capability        | Details                                                                 |
|------------------|-------------------------------------------------------------------------|
| 🔁 CRUD Operations | Create, read, update, and delete user records                         |
| 📦 Bulk Insert     | POST `/api/users` accepts an array of users and saves them all at once |
| 🔍 Search Queries  | Search users by `email` or partial name match (case-insensitive)       |
| ⏱️ Timestamps      | Auto-managed `createdAt` and `updatedAt` fields                        |
| 🧪 H2 Testing DB   | In-memory database for fast, isolated unit testing                     |
| ✅ Validation      | Enforces input constraints via `@Valid` (name length, email format)     |
| 📄 Pagination      | Supports `page`, `size`, and `sort` query parameters via Spring `Pageable` |

---

## 🧰 Tech Stack

| Layer         | Technology                        |
|---------------|------------------------------------|
| Language      | Java 17 / 21 / 24                  |
| Framework     | Spring Boot 3, Spring Data JPA     |
| Database      | PostgreSQL (Main), H2 (Testing)    |
| Build Tool    | Maven                              |
| Validation    | Jakarta Bean Validation (`@Valid`) |
| Testing       | JUnit 5, MockMvc                   |
| Dev Tools     | Spring DevTools, Jackson           |
| Optional      | Lombok (⚠ Java 24 users: not recommended) |

---

## ⚙️ Getting Started

### 🔧 Prerequisites

- Java 17+ (recommended: 17 or 21 for Lombok compatibility)
- PostgreSQL running locally (`userdb` database)
- Maven
- Git

---

### 📥 Clone the Repository

```bash
git clone https://github.com/Subrata3841/UserManagementAPI.git
cd UserManagementAPI
````

---

### 🛠️ Configure PostgreSQL Connection

Update your `application.properties`:

```properties
spring.datasource.url=jdbc:postgresql://localhost:5432/userdb
spring.datasource.username=postgres
spring.datasource.password=yourpassword

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
```

> 💡 You can use environment variables for secure config in production.

---

### ▶️ Run the Application

Using Maven wrapper:

```bash
./mvnw spring-boot:run
```

Or build a JAR:

```bash
./mvnw clean package
java -jar target/usermanagementapi-0.0.1-SNAPSHOT.jar
```

Server runs at:
👉 `http://localhost:8080`

---

## 📬 API Endpoints

| Method | Endpoint          | Description                         |
| ------ | ----------------- | ----------------------------------- |
| GET    | `/api/users`      | Get all users                       |
| GET    | `/api/users/{id}` | Get user by ID                      |
| POST   | `/api/users`      | Create multiple users (bulk insert) |
| PUT    | `/api/users/{id}` | Update existing user                |
| DELETE | `/api/users/{id}` | Delete a user                       |
| GET    | `/api/users/page` | Get users with pagination & sorting |

📝 All responses are JSON
❌ Invalid inputs return HTTP `400 Bad Request` with validation messages.

---

## 🗄 Database Schema

```sql
users (
  id          BIGSERIAL PRIMARY KEY,
  name        VARCHAR(100) NOT NULL,
  email       VARCHAR(255) NOT NULL UNIQUE,
  created_at  TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at  TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
```

Schema is auto-generated by JPA using `spring.jpa.hibernate.ddl-auto=update`.

---

## 🧪 Testing

### ✔️ Testing Strategy

| Layer        | Tool             | Description                                 |
| ------------ | ---------------- | ------------------------------------------- |
| REST API     | MockMvc          | Simulates HTTP requests without real server |
| Unit Testing | JUnit 5          | Controller and repository test coverage     |
| JSON Mapper  | Jackson + JSR310 | Handles date/time and JSON serialization    |
| Database     | H2 (in-memory)   | Used for fast isolated tests                |

Run all tests:

```bash
./mvnw test
```

---

## 📁 Project Structure

```
UserManagementAPI/
├── controller/         # REST endpoints
├── model/              # JPA entity (User)
├── repositry/          # Spring Data JPA repository
├── exception/          # (optional) custom exception handlers
├── resources/          # application.properties
├── test/               # JUnit + MockMvc test cases
└── UsermanagementapiApplication.java
```

## 🧹 .gitignore (Recommended)

```gitignore
/target
.idea
*.iml
*.log
*.class
*.jar
```

## 🙋 Author

**Subrata Mondal**
🔗 [GitHub](https://github.com/Subrata3841)
